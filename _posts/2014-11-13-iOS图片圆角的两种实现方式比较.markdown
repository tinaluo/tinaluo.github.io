---
layout:     post
title:      iOS图片圆角的两种实现方式比较
date:       2014-11-13 12:31:19
summary:    Pixyll is a simple, beautiful theme for Jekyll that emphasizes content rather than aesthetic fluff.
categories: iOS开发
---

设置CALayer属性masksToBounds = YES时会有性能问题，导致圆角view多的地方卡顿，将其设置为NO，并使用以下方法直接将图片切成圆角可以提高性能：

{% highlight objc %}
-(void)setImageURL:(NSString *)url{
    [self sd_setImageWithURL:[NSURL URLWithString:url] placeholderImage:[UIImage imageNamed:@"my_avatar"] completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {
        if (image) {
            // Begin a new image that will be the new image with the rounded corners
            // (here with the size of an UIImageView)
            UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0.0);
            
            // Add a clip before drawing anything, in the shape of an rounded rect
            [[UIBezierPath bezierPathWithRoundedRect:self.bounds
                                        cornerRadius:self.bounds.size.width/2] addClip];
            // Draw your image
            [image drawInRect:self.bounds];
            
            // Get the image, here setting the UIImageView image
            self.image = UIGraphicsGetImageFromCurrentImageContext();
            
            // Lets forget about that we were drawing
            UIGraphicsEndImageContext();
        }
    }];
}
{% endhighlight %}


